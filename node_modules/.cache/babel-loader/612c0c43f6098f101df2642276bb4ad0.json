{"ast":null,"code":"import _objectSpread from\"D:/Documents/GitHub/ra16-diploma-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"D:/Documents/GitHub/ra16-diploma-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";var getLocalStorageData=function getLocalStorageData(){try{var data=JSON.parse(localStorage.getItem('cartData'));return data;}catch(error){return[];}};var initialState={cartData:localStorage.getItem('cartData')?getLocalStorageData():[]};export default function cartReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case'CART_ADD_POSITION':{var cartProduct=action.payload.cartProduct;var updateState=function updateState(currState,product){return currState.cartData.find(function(value){return value.id===product.id&&value.size===product.size;})?_toConsumableArray(currState.cartData.map(function(value){return value.id===product.id&&value.size===product.size?_objectSpread(_objectSpread({},value),{},{count:value.count+product.count,price:product.price<value.price?product.price:value.price}):value;})):[].concat(_toConsumableArray(currState.cartData),[product]);};var newState=updateState(state,cartProduct);localStorage.setItem('cartData',JSON.stringify(newState));return _objectSpread(_objectSpread({},state),{},{cartData:newState});}case'CART_DELETE_POSITION':{var _action$payload=action.payload,id=_action$payload.id,size=_action$payload.size;var _updateState=function _updateState(){return _toConsumableArray(state.cartData.filter(function(value){return!(value.id===id&&value.size===size);}));};var _newState=_updateState();localStorage.setItem('cartData',JSON.stringify(_newState));return _objectSpread(_objectSpread({},state),{},{cartData:_newState});}case'CART_LOCALSTORAGE_CLEAR':{localStorage.removeItem('cartData');return _objectSpread(_objectSpread({},state),{},{cartData:[]});}default:return state;}}","map":{"version":3,"sources":["D:/Documents/GitHub/ra16-diploma-master/src/reducers/cartReducer.js"],"names":["getLocalStorageData","data","JSON","parse","localStorage","getItem","error","initialState","cartData","cartReducer","state","action","type","cartProduct","payload","updateState","currState","product","find","value","id","size","map","count","price","newState","setItem","stringify","filter","removeItem"],"mappings":"mUAAA,GAAMA,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,EAAM,CAChC,GAAI,CACF,GAAMC,CAAAA,IAAI,CAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,CAAb,CACA,MAAOJ,CAAAA,IAAP,CACD,CAAC,MAAOK,KAAP,CAAc,CACd,MAAO,EAAP,CACD,CACF,CAPD,CASA,GAAMC,CAAAA,YAAY,CAAG,CACnBC,QAAQ,CAAEJ,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAmCL,mBAAmB,EAAtD,CAA2D,EADlD,CAArB,CAIA,cAAe,SAASS,CAAAA,WAAT,EAAmD,IAA9BC,CAAAA,KAA8B,2DAAtBH,YAAsB,IAARI,CAAAA,MAAQ,2CAChE,OAAQA,MAAM,CAACC,IAAf,EACE,IAAK,mBAAL,CAA0B,CACxB,GAAQC,CAAAA,WAAR,CAAwBF,MAAM,CAACG,OAA/B,CAAQD,WAAR,CACA,GAAME,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,SAAD,CAAYC,OAAZ,QACjBD,CAAAA,SAAS,CAACR,QAAV,CAAmBU,IAAnB,CACC,SAACC,KAAD,QAAYA,CAAAA,KAAK,CAACC,EAAN,GAAaH,OAAO,CAACG,EAArB,EAA2BD,KAAK,CAACE,IAAN,GAAeJ,OAAO,CAACI,IAA9D,EADD,CAAD,oBAGQL,SAAS,CAACR,QAAV,CAAmBc,GAAnB,CACJ,SAACH,KAAD,QAAYA,CAAAA,KAAK,CAACC,EAAN,GAAaH,OAAO,CAACG,EAArB,EAA2BD,KAAK,CAACE,IAAN,GAAeJ,OAAO,CAACI,IAAlD,gCAELF,KAFK,MAGRI,KAAK,CAAEJ,KAAK,CAACI,KAAN,CAAcN,OAAO,CAACM,KAHrB,CAIRC,KAAK,CAAGP,OAAO,CAACO,KAAR,CAAgBL,KAAK,CAACK,KAAvB,CAAgCP,OAAO,CAACO,KAAxC,CAAgDL,KAAK,CAACK,KAJrD,GAMRL,KANJ,EADI,CAHR,+BAYQH,SAAS,CAACR,QAZlB,GAY4BS,OAZ5B,EADkB,EAApB,CAeA,GAAMQ,CAAAA,QAAQ,CAAGV,WAAW,CAACL,KAAD,CAAQG,WAAR,CAA5B,CACAT,YAAY,CAACsB,OAAb,CAAqB,UAArB,CAAiCxB,IAAI,CAACyB,SAAL,CAAeF,QAAf,CAAjC,EACA,sCAAYf,KAAZ,MAAmBF,QAAQ,CAAEiB,QAA7B,GACD,CACD,IAAK,sBAAL,CAA6B,CAC3B,oBAAqBd,MAAM,CAACG,OAA5B,CAAQM,EAAR,iBAAQA,EAAR,CAAYC,IAAZ,iBAAYA,IAAZ,CACA,GAAMN,CAAAA,YAAW,CAAG,QAAdA,CAAAA,YAAc,6BACdL,KAAK,CAACF,QAAN,CAAeoB,MAAf,CAAsB,SAACT,KAAD,QAAW,EAAEA,KAAK,CAACC,EAAN,GAAaA,EAAb,EAAmBD,KAAK,CAACE,IAAN,GAAeA,IAApC,CAAX,EAAtB,CADc,GAApB,CAGA,GAAMI,CAAAA,SAAQ,CAAGV,YAAW,EAA5B,CACAX,YAAY,CAACsB,OAAb,CAAqB,UAArB,CAAiCxB,IAAI,CAACyB,SAAL,CAAeF,SAAf,CAAjC,EACA,sCAAYf,KAAZ,MAAmBF,QAAQ,CAAEiB,SAA7B,GACD,CACD,IAAK,yBAAL,CAAgC,CAC9BrB,YAAY,CAACyB,UAAb,CAAwB,UAAxB,EACA,sCAAYnB,KAAZ,MAAmBF,QAAQ,CAAE,EAA7B,GACD,CACD,QAAS,MAAOE,CAAAA,KAAP,CAnCX,CAqCD","sourcesContent":["const getLocalStorageData = () => {\n  try {\n    const data = JSON.parse(localStorage.getItem('cartData'));\n    return data;\n  } catch (error) {\n    return [];\n  }\n};\n\nconst initialState = {\n  cartData: localStorage.getItem('cartData') ? getLocalStorageData() : [],\n};\n\nexport default function cartReducer(state = initialState, action) {\n  switch (action.type) {\n    case 'CART_ADD_POSITION': {\n      const { cartProduct } = action.payload;\n      const updateState = (currState, product) => (\n        (currState.cartData.find(\n          (value) => (value.id === product.id && value.size === product.size),\n        ))\n          ? [...currState.cartData.map(\n            (value) => (value.id === product.id && value.size === product.size\n              ? {\n                ...value,\n                count: value.count + product.count,\n                price: (product.price < value.price) ? product.price : value.price,\n              }\n              : value),\n          )]\n          : [...currState.cartData, product]\n      );\n      const newState = updateState(state, cartProduct);\n      localStorage.setItem('cartData', JSON.stringify(newState));\n      return { ...state, cartData: newState };\n    }\n    case 'CART_DELETE_POSITION': {\n      const { id, size } = action.payload;\n      const updateState = () => (\n        [...state.cartData.filter((value) => !(value.id === id && value.size === size))]\n      );\n      const newState = updateState();\n      localStorage.setItem('cartData', JSON.stringify(newState));\n      return { ...state, cartData: newState };\n    }\n    case 'CART_LOCALSTORAGE_CLEAR': {\n      localStorage.removeItem('cartData');\n      return { ...state, cartData: [] };\n    }\n    default: return state;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}