{"ast":null,"code":"import _regeneratorRuntime from\"D:/Documents/GitHub/ra16-diploma-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Documents/GitHub/ra16-diploma-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useEffect}from'react';import{useHistory}from'react-router-dom';import{useSelector,useDispatch}from'react-redux';import cn from'classnames';import Preloader from'../Preloader/Preloader';import MessageDialog from'../MessageDialog/MessageDialog';import noimagesplash from'../../img/no-image-icon-23487.png';import{productRequest,productCount,productSize}from'../../actions/productAction';import{cartAddPosition}from'../../actions/cartAction';import{orderInit}from'../../actions/orderAction';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Product(props){var match=props.match;var history=useHistory();var productState=useSelector(function(state){return state.productReducer;});var dispatch=useDispatch();var id=parseInt(match.params.id,10);var availableSizes=productState.product&&Object.prototype.hasOwnProperty.call(productState.product,'sizes')&&Array.isArray(productState.product.sizes)?productState.product.sizes.filter(function(value){return value.avalible;}):null;function getProduct(){return _getProduct.apply(this,arguments);}function _getProduct(){_getProduct=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(productRequest(id));case 1:case\"end\":return _context.stop();}}},_callee);}));return _getProduct.apply(this,arguments);}useEffect(function(){getProduct();},[dispatch,id]);var onIncrease=function onIncrease(){return productState.count>=10?dispatch(productCount(10)):dispatch(productCount(productState.count+1));};var onDecrease=function onDecrease(){return productState.count<=1?dispatch(productCount(1)):dispatch(productCount(productState.count-1));};var onSelectSize=function onSelectSize(size){dispatch(productSize(size));};var onAddCartPosition=function onAddCartPosition(){var cartProduct={id:productState.product.id,title:productState.product.title,size:productState.size,count:productState.count,price:productState.product.price};dispatch(cartAddPosition(cartProduct));dispatch(orderInit());history.push('/cart');};var onImageError=function onImageError(event){var e=event;e.target.src=noimagesplash;};return/*#__PURE__*/_jsxs(_Fragment,{children:[productState.loadingStatus&&/*#__PURE__*/_jsx(Preloader,{}),productState.errorText&&(productState.repeatAction?/*#__PURE__*/_jsx(MessageDialog,{content:{type:'error',text:productState.errorText},onClick:function onClick(){return getProduct();}}):/*#__PURE__*/_jsx(MessageDialog,{content:{type:'error',text:productState.errorText}})),!productState.loadingStatus&&productState.product&&/*#__PURE__*/_jsxs(\"section\",{className:\"catalog-item\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center\",children:productState.product.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-5\",children:/*#__PURE__*/_jsx(\"img\",{src:productState.product.images[0],className:\"img-fluid\",alt:productState.product.title,onError:onImageError})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-7\",children:[/*#__PURE__*/_jsx(\"table\",{className:\"table table-bordered\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\\u0410\\u0440\\u0442\\u0438\\u043A\\u0443\\u043B\"}),/*#__PURE__*/_jsx(\"td\",{children:productState.product.sku})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\\u041F\\u0440\\u043E\\u0438\\u0437\\u0432\\u043E\\u0434\\u0438\\u0442\\u0435\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"td\",{children:productState.product.manufacturer})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\\u0426\\u0432\\u0435\\u0442\"}),/*#__PURE__*/_jsx(\"td\",{children:productState.product.color})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\\u041C\\u0430\\u0442\\u0435\\u0440\\u0438\\u0430\\u043B\\u044B\"}),/*#__PURE__*/_jsx(\"td\",{children:productState.product.material})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\\u0421\\u0435\\u0437\\u043E\\u043D\"}),/*#__PURE__*/_jsx(\"td\",{children:productState.product.season})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\\u041F\\u043E\\u0432\\u043E\\u0434\"}),/*#__PURE__*/_jsx(\"td\",{children:productState.product.reason})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0420\\u0430\\u0437\\u043C\\u0435\\u0440\\u044B \\u0432 \\u043D\\u0430\\u043B\\u0438\\u0447\\u0438\\u0438:\\xA0\",availableSizes&&availableSizes.length>0?availableSizes.map(function(value){return/*#__PURE__*/_jsx(\"span\",{className:cn({'catalog-item-size':true,selected:value.size===productState.size}),onClick:function onClick(){return onSelectSize(value.size);},onKeyPress:function onKeyPress(){return onSelectSize(value.size);},role:\"button\",tabIndex:\"0\",children:value.size},value.size);}):'-']}),availableSizes&&availableSizes.length>0&&/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E:\",/*#__PURE__*/_jsxs(\"span\",{className:\"btn-group btn-group-sm pl-2\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:onDecrease,children:\"-\"}),/*#__PURE__*/_jsx(\"span\",{className:\"btn btn-outline-primary\",children:productState.count}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:onIncrease,children:\"+\"})]})]})]}),availableSizes&&availableSizes.length>0&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-danger btn-block btn-lg\",disabled:!productState.size,onClick:onAddCartPosition,children:\"\\u0412 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0443\"})]})]})]})]});}","map":{"version":3,"sources":["D:/Documents/GitHub/ra16-diploma-master/src/components/Product/Product.jsx"],"names":["React","useEffect","useHistory","useSelector","useDispatch","cn","Preloader","MessageDialog","noimagesplash","productRequest","productCount","productSize","cartAddPosition","orderInit","Product","props","match","history","productState","state","productReducer","dispatch","id","parseInt","params","availableSizes","product","Object","prototype","hasOwnProperty","call","Array","isArray","sizes","filter","value","avalible","getProduct","onIncrease","count","onDecrease","onSelectSize","size","onAddCartPosition","cartProduct","title","price","push","onImageError","event","e","target","src","loadingStatus","errorText","repeatAction","type","text","images","sku","manufacturer","color","material","season","reason","length","map","selected"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useHistory } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport cn from 'classnames';\nimport Preloader from '../Preloader/Preloader';\nimport MessageDialog from '../MessageDialog/MessageDialog';\nimport noimagesplash from '../../img/no-image-icon-23487.png';\nimport {\n  productRequest,\n  productCount,\n  productSize,\n} from '../../actions/productAction';\nimport { cartAddPosition } from '../../actions/cartAction';\nimport { orderInit } from '../../actions/orderAction';\n\nexport default function Product(props) {\n  const { match } = props;\n  const history = useHistory();\n  const productState = useSelector((state) => state.productReducer);\n  const dispatch = useDispatch();\n  const id = parseInt(match.params.id, 10);\n  const availableSizes = productState.product && (Object.prototype.hasOwnProperty.call(productState.product, 'sizes')\n    && Array.isArray(productState.product.sizes))\n    ? productState.product.sizes.filter((value) => value.avalible)\n    : null;\n\n  async function getProduct() {\n    dispatch(productRequest(id));\n  }\n\n  useEffect(() => {\n    getProduct();\n  }, [dispatch, id]);\n\n  const onIncrease = () => (productState.count >= 10\n    ? dispatch(productCount(10))\n    : dispatch(productCount(productState.count + 1)));\n\n  const onDecrease = () => (productState.count <= 1\n    ? dispatch(productCount(1))\n    : dispatch(productCount(productState.count - 1)));\n\n  const onSelectSize = (size) => {\n    dispatch(productSize(size));\n  };\n\n  const onAddCartPosition = () => {\n    const cartProduct = {\n      id: productState.product.id,\n      title: productState.product.title,\n      size: productState.size,\n      count: productState.count,\n      price: productState.product.price,\n    };\n    dispatch(cartAddPosition(cartProduct));\n    dispatch(orderInit());\n    history.push('/cart');\n  };\n\n  const onImageError = (event) => {\n    const e = event;\n    e.target.src = noimagesplash;\n  };\n\n  return (\n    <>\n      {productState.loadingStatus && <Preloader />}\n      {productState.errorText && (\n        productState.repeatAction\n          ? (\n            <MessageDialog\n              content={{ type: 'error', text: productState.errorText }}\n              onClick={() => getProduct()}\n            />\n          )\n          : (\n            <MessageDialog\n              content={{ type: 'error', text: productState.errorText }}\n            />\n          )\n      )}\n      {(!productState.loadingStatus && productState.product) && (\n        <section className=\"catalog-item\">\n          <h2 className=\"text-center\">{productState.product.title}</h2>\n          <div className=\"row\">\n            <div className=\"col-5\">\n              <img\n                src={productState.product.images[0]}\n                className=\"img-fluid\"\n                alt={productState.product.title}\n                onError={onImageError}\n              />\n            </div>\n            <div className=\"col-7\">\n              <table className=\"table table-bordered\">\n                <tbody>\n                  <tr>\n                    <td>Артикул</td>\n                    <td>{productState.product.sku}</td>\n                  </tr>\n                  <tr>\n                    <td>Производитель</td>\n                    <td>{productState.product.manufacturer}</td>\n                  </tr>\n                  <tr>\n                    <td>Цвет</td>\n                    <td>{productState.product.color}</td>\n                  </tr>\n                  <tr>\n                    <td>Материалы</td>\n                    <td>{productState.product.material}</td>\n                  </tr>\n                  <tr>\n                    <td>Сезон</td>\n                    <td>{productState.product.season}</td>\n                  </tr>\n                  <tr>\n                    <td>Повод</td>\n                    <td>{productState.product.reason}</td>\n                  </tr>\n                </tbody>\n              </table>\n              <div className=\"text-center\">\n                <p>\n                  Размеры в наличии:&nbsp;\n                  {(availableSizes && availableSizes.length > 0)\n                    ? availableSizes.map((value) => (\n                      <span\n                        key={value.size}\n                        className={cn({\n                          'catalog-item-size': true,\n                          selected: value.size === productState.size,\n                        })}\n                        onClick={() => onSelectSize(value.size)}\n                        onKeyPress={() => onSelectSize(value.size)}\n                        role=\"button\"\n                        tabIndex=\"0\"\n                      >\n                        {value.size}\n                      </span>\n                    ))\n                    : '-'}\n                </p>\n                {(availableSizes && availableSizes.length > 0) && (\n                  <p>\n                    Количество:\n                    <span className=\"btn-group btn-group-sm pl-2\">\n                      <button type=\"button\" className=\"btn btn-secondary\" onClick={onDecrease}>-</button>\n                      <span className=\"btn btn-outline-primary\">{productState.count}</span>\n                      <button type=\"button\" className=\"btn btn-secondary\" onClick={onIncrease}>+</button>\n                    </span>\n                  </p>\n                )}\n              </div>\n              {(availableSizes && availableSizes.length > 0)\n                && (\n                  <button\n                    type=\"button\"\n                    className=\"btn btn-danger btn-block btn-lg\"\n                    disabled={!productState.size}\n                    onClick={onAddCartPosition}\n                  >\n                    В корзину\n                  </button>\n                )}\n            </div>\n          </div>\n        </section>\n      )}\n    </>\n  );\n}\n\nProduct.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.instanceOf(Object),\n  }).isRequired,\n};\n"]},"metadata":{},"sourceType":"module"}