{"ast":null,"code":"import _regeneratorRuntime from\"D:/Documents/GitHub/ra16-diploma-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Documents/GitHub/ra16-diploma-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";export default function fetchData(_x,_x2){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(url,opts){var response,detailedError,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:response=null;detailedError=null;_context.prev=2;_context.next=5;return fetch(url,opts);case 5:response=_context.sent;if(response.ok){_context.next=9;break;}detailedError=JSON.stringify({code:response.status,text:'Ошибка загрузки данных'});throw new Error(detailedError);case 9:if(!(response.status===204)){_context.next=11;break;}return _context.abrupt(\"return\",[]);case 11:_context.next=17;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](2);if(!response)detailedError=JSON.stringify({code:500,text:'Ошибка загрузки данных'});throw new Error(detailedError);case 17:_context.next=19;return response.json();case 19:data=_context.sent;return _context.abrupt(\"return\",data);case 21:case\"end\":return _context.stop();}}},_callee,null,[[2,13]]);}));return _fetchData.apply(this,arguments);}export function fetchCompositeData(_x3,_x4){return _fetchCompositeData.apply(this,arguments);}function _fetchCompositeData(){_fetchCompositeData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(urls,opts){var results;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return Promise.all(urls.map(function(url){return fetch(url,opts).then(function(response){return response.json();})// eslint-disable-next-line no-unused-vars\n.catch(function(e){var detailedError=JSON.stringify({code:500,text:'Ошибка загрузки данных'});throw new Error(detailedError);});}));case 2:results=_context2.sent;return _context2.abrupt(\"return\",results);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _fetchCompositeData.apply(this,arguments);}","map":{"version":3,"sources":["D:/Documents/GitHub/ra16-diploma-master/src/api/fetch.js"],"names":["fetchData","url","opts","response","detailedError","fetch","ok","JSON","stringify","code","status","text","Error","json","data","fetchCompositeData","urls","Promise","all","map","then","catch","e","results"],"mappings":"yTAAA,uBAA8BA,CAAAA,SAA9B,kD,yFAAe,iBAAyBC,GAAzB,CAA8BC,IAA9B,kJACTC,QADS,CACE,IADF,CAETC,aAFS,CAEO,IAFP,uCAIMC,CAAAA,KAAK,CAACJ,GAAD,CAAMC,IAAN,CAJX,QAIXC,QAJW,kBAKNA,QAAQ,CAACG,EALH,yBAMTF,aAAa,CAAGG,IAAI,CAACC,SAAL,CAAe,CAAEC,IAAI,CAAEN,QAAQ,CAACO,MAAjB,CAAyBC,IAAI,CAAE,wBAA/B,CAAf,CAAhB,CANS,KAOH,IAAIC,CAAAA,KAAJ,CAAUR,aAAV,CAPG,aASPD,QAAQ,CAACO,MAAT,GAAoB,GATb,2DASyB,EATzB,2FAWX,GAAI,CAACP,QAAL,CAAeC,aAAa,CAAGG,IAAI,CAACC,SAAL,CAAe,CAAEC,IAAI,CAAE,GAAR,CAAaE,IAAI,CAAE,wBAAnB,CAAf,CAAhB,CAXJ,KAYL,IAAIC,CAAAA,KAAJ,CAAUR,aAAV,CAZK,gCAcMD,CAAAA,QAAQ,CAACU,IAAT,EAdN,SAcPC,IAdO,+CAeNA,IAfM,uE,4CAkBf,eAAsBC,CAAAA,kBAAtB,4D,2GAAO,kBAAkCC,IAAlC,CAAwCd,IAAxC,yJACiBe,CAAAA,OAAO,CAACC,GAAR,CAAYF,IAAI,CAACG,GAAL,CAAS,SAAClB,GAAD,QAASI,CAAAA,KAAK,CAACJ,GAAD,CAAMC,IAAN,CAAL,CACjDkB,IADiD,CAC5C,SAACjB,QAAD,QAAcA,CAAAA,QAAQ,CAACU,IAAT,EAAd,EAD4C,CAElD;AAFkD,CAGjDQ,KAHiD,CAG3C,SAACC,CAAD,CAAO,CACZ,GAAMlB,CAAAA,aAAa,CAAGG,IAAI,CAACC,SAAL,CAAe,CAAEC,IAAI,CAAE,GAAR,CAAaE,IAAI,CAAE,wBAAnB,CAAf,CAAtB,CACA,KAAM,IAAIC,CAAAA,KAAJ,CAAUR,aAAV,CAAN,CACD,CANiD,CAAT,EAAT,CAAZ,CADjB,QACCmB,OADD,iDAQEA,OARF,0D","sourcesContent":["export default async function fetchData(url, opts) {\n  let response = null;\n  let detailedError = null;\n  try {\n    response = await fetch(url, opts);\n    if (!response.ok) {\n      detailedError = JSON.stringify({ code: response.status, text: 'Ошибка загрузки данных' });\n      throw new Error(detailedError);\n    }\n    if (response.status === 204) return [];\n  } catch (e) {\n    if (!response) detailedError = JSON.stringify({ code: 500, text: 'Ошибка загрузки данных' });\n    throw new Error(detailedError);\n  }\n  const data = await response.json();\n  return data;\n}\n\nexport async function fetchCompositeData(urls, opts) {\n  const results = await Promise.all(urls.map((url) => fetch(url, opts)\n    .then((response) => response.json())\n    // eslint-disable-next-line no-unused-vars\n    .catch((e) => {\n      const detailedError = JSON.stringify({ code: 500, text: 'Ошибка загрузки данных' });\n      throw new Error(detailedError);\n    })));\n  return results;\n}\n"]},"metadata":{},"sourceType":"module"}