{"ast":null,"code":"import _regeneratorRuntime from\"D:/Documents/GitHub/ra16-diploma-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Documents/GitHub/ra16-diploma-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useEffect}from'react';import{useSelector,useDispatch}from'react-redux';import Preloader from'../Preloader/Preloader';import MessageDialog from'../MessageDialog/MessageDialog';import Categories from'../Categories/Categories';import SearchForm from'../SearchForm/SearchForm';import List from'../List/List';import{catalogRequest}from'../../actions/catalogAction';import{catalogAndCategoriesRequest}from'../../actions/categoriesAction';import{searchTextStatus}from'../../actions/searchAction';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Catalog(props){var searchSupport=props.searchSupport;var categoriesState=useSelector(function(state){return state.categoriesReducer;});var catalogState=useSelector(function(state){return state.catalogReducer;});var searchState=useSelector(function(state){return state.searchReducer;});var searchText=searchSupport?searchState.search:'';var dispatch=useDispatch();function getCatalog(_x){return _getCatalog.apply(this,arguments);}function _getCatalog(){_getCatalog=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(categoryId){var offset,_args=arguments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:offset=_args.length>1&&_args[1]!==undefined?_args[1]:0;dispatch(catalogRequest(searchText,categoryId,offset));case 2:case\"end\":return _context.stop();}}},_callee);}));return _getCatalog.apply(this,arguments);}function getCatalogAndCategories(_x2){return _getCatalogAndCategories.apply(this,arguments);}function _getCatalogAndCategories(){_getCatalogAndCategories=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(categoryId){var offset,_args2=arguments;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:offset=_args2.length>1&&_args2[1]!==undefined?_args2[1]:0;dispatch(catalogAndCategoriesRequest(searchText,categoryId,offset));case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _getCatalogAndCategories.apply(this,arguments);}useEffect(function(){getCatalogAndCategories(categoriesState.activeCategory);},[dispatch]);useEffect(function(){if(searchState.searchStatus){getCatalog(categoriesState.activeCategory);dispatch(searchTextStatus(searchState.search,false));}},[searchState.searchStatus]);var onCategoryChange=function onCategoryChange(id){return getCatalog(id);};var loadData=function loadData(event){event.preventDefault();getCatalog(categoriesState.activeCategory,catalogState.catalogData.length);};return/*#__PURE__*/_jsxs(\"section\",{className:\"catalog\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center\",children:\"\\u041A\\u0430\\u0442\\u0430\\u043B\\u043E\\u0433\"}),searchSupport&&/*#__PURE__*/_jsx(SearchForm,{}),categoriesState.loadingStatus&&/*#__PURE__*/_jsx(Preloader,{}),categoriesState.errorText&&/*#__PURE__*/_jsx(MessageDialog,{content:{type:'error',text:categoriesState.errorText},onClick:function onClick(){return getCatalogAndCategories(categoriesState.activeCategory);}}),!categoriesState.errorText&&!categoriesState.loadingStatus&&/*#__PURE__*/_jsx(Categories,{onChange:onCategoryChange}),catalogState.catalogData.length!==0?/*#__PURE__*/_jsx(List,{data:catalogState.catalogData}):!catalogState.errorText&&!catalogState.loadingStatus&&/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-muted\",children:\"\\u041F\\u043E\\u0438\\u0441\\u043A \\u043F\\u043E \\u0432\\u0430\\u0448\\u0435\\u043C\\u0443 \\u0437\\u0430\\u043F\\u0440\\u043E\\u0441\\u0443 \\u043D\\u0435 \\u0434\\u0430\\u043B \\u0440\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442\\u043E\\u0432\"}),!categoriesState.loadingStatus&&catalogState.loadingStatus&&/*#__PURE__*/_jsx(Preloader,{}),!categoriesState.errorText&&catalogState.errorText&&/*#__PURE__*/_jsx(MessageDialog,{content:{type:'error',text:catalogState.errorText},onClick:function onClick(event){return loadData(event);}}),!catalogState.errorText&&!catalogState.loadingStatus&&catalogState.hasNextData&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(event){return loadData(event);},className:\"btn btn-outline-primary\",disabled:catalogState.loadingStatus,children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0435\\u0449\\u0451\"})})]});}Catalog.defaultProps={searchSupport:true};","map":{"version":3,"sources":["D:/Documents/GitHub/ra16-diploma-master/src/components/Catalog/Catalog.jsx"],"names":["React","useEffect","useSelector","useDispatch","Preloader","MessageDialog","Categories","SearchForm","List","catalogRequest","catalogAndCategoriesRequest","searchTextStatus","Catalog","props","searchSupport","categoriesState","state","categoriesReducer","catalogState","catalogReducer","searchState","searchReducer","searchText","search","dispatch","getCatalog","categoryId","offset","getCatalogAndCategories","activeCategory","searchStatus","onCategoryChange","id","loadData","event","preventDefault","catalogData","length","loadingStatus","errorText","type","text","hasNextData","defaultProps"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport Preloader from '../Preloader/Preloader';\nimport MessageDialog from '../MessageDialog/MessageDialog';\nimport Categories from '../Categories/Categories';\nimport SearchForm from '../SearchForm/SearchForm';\nimport List from '../List/List';\nimport { catalogRequest } from '../../actions/catalogAction';\nimport { catalogAndCategoriesRequest } from '../../actions/categoriesAction';\nimport { searchTextStatus } from '../../actions/searchAction';\n\nexport default function Catalog(props) {\n  const { searchSupport } = props;\n  const categoriesState = useSelector((state) => state.categoriesReducer);\n  const catalogState = useSelector((state) => state.catalogReducer);\n  const searchState = useSelector((state) => state.searchReducer);\n  const searchText = searchSupport ? searchState.search : '';\n  const dispatch = useDispatch();\n\n  async function getCatalog(categoryId, offset = 0) {\n    dispatch(catalogRequest(searchText, categoryId, offset));\n  }\n\n  async function getCatalogAndCategories(categoryId, offset = 0) {\n    dispatch(catalogAndCategoriesRequest(searchText, categoryId, offset));\n  }\n\n  useEffect(() => {\n    getCatalogAndCategories(categoriesState.activeCategory);\n  }, [dispatch]);\n\n  useEffect(() => {\n    if (searchState.searchStatus) {\n      getCatalog(categoriesState.activeCategory);\n      dispatch(searchTextStatus(searchState.search, false));\n    }\n  }, [searchState.searchStatus]);\n\n  const onCategoryChange = (id) => getCatalog(id);\n\n  const loadData = (event) => {\n    event.preventDefault();\n    getCatalog(categoriesState.activeCategory, catalogState.catalogData.length);\n  };\n\n  return (\n    <section className=\"catalog\">\n      <h2 className=\"text-center\">Каталог</h2>\n      {searchSupport && <SearchForm />}\n      {categoriesState.loadingStatus && <Preloader />}\n      {categoriesState.errorText && (\n        <MessageDialog\n          content={{ type: 'error', text: categoriesState.errorText }}\n          onClick={() => getCatalogAndCategories(categoriesState.activeCategory)}\n        />\n      )}\n      {(!categoriesState.errorText && !categoriesState.loadingStatus)\n        && <Categories onChange={onCategoryChange} />}\n      {(catalogState.catalogData.length !== 0)\n        ? <List data={catalogState.catalogData} />\n        : (!catalogState.errorText && !catalogState.loadingStatus)\n        && <p className=\"text-center text-muted\">Поиск по вашему запросу не дал результатов</p>}\n      {!categoriesState.loadingStatus && catalogState.loadingStatus && <Preloader />}\n      {!categoriesState.errorText && catalogState.errorText && (\n        <MessageDialog\n          content={{ type: 'error', text: catalogState.errorText }}\n          onClick={(event) => loadData(event)}\n        />\n      )}\n      {(!catalogState.errorText && !catalogState.loadingStatus && catalogState.hasNextData) && (\n        <div className=\"text-center\">\n          <button\n            type=\"button\"\n            onClick={(event) => loadData(event)}\n            className=\"btn btn-outline-primary\"\n            disabled={catalogState.loadingStatus}\n          >\n            Загрузить ещё\n          </button>\n        </div>\n      )}\n    </section>\n  );\n}\n\nCatalog.defaultProps = {\n  searchSupport: true,\n};\n\nCatalog.propTypes = {\n  searchSupport: PropTypes.bool,\n};\n"]},"metadata":{},"sourceType":"module"}