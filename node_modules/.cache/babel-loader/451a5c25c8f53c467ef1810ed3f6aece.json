{"ast":null,"code":"import _regeneratorRuntime from\"D:/Documents/GitHub/ra16-diploma-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Documents/GitHub/ra16-diploma-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";/* eslint-disable jsx-a11y/label-has-associated-control */import React from'react';import{useSelector,useDispatch}from'react-redux';import Preloader from'../Preloader/Preloader';import MessageDialog from'../MessageDialog/MessageDialog';import{orderRequest,orderPhone,orderAddress,orderAgreement}from'../../actions/orderAction';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Order(){var orderState=useSelector(function(state){return state.orderReducer;});var cartState=useSelector(function(state){return state.cartReducer;});var dispatch=useDispatch();function setOrder(){return _setOrder.apply(this,arguments);}function _setOrder(){_setOrder=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(orderRequest(orderState.phone,orderState.address,cartState.cartData));case 1:case\"end\":return _context.stop();}}},_callee);}));return _setOrder.apply(this,arguments);}var _onSubmit=function onSubmit(event){event.preventDefault();setOrder();};var onChangePhone=function onChangePhone(event){var _event$target=event.target,id=_event$target.id,value=_event$target.value;dispatch(orderPhone(id,value));};var onChangeAddress=function onChangeAddress(event){var _event$target2=event.target,id=_event$target2.id,value=_event$target2.value;dispatch(orderAddress(id,value));};var onChangeAgreement=function onChangeAgreement(event){var id=event.target.id;var status=event.target.checked;dispatch(orderAgreement(id,status));};return orderState.operationResult?/*#__PURE__*/_jsx(MessageDialog,{content:{title:'Ваш заказ принят в обработку',text:'Наш сотрудник свяжется с Вами для завершения оформления заказа'}}):/*#__PURE__*/_jsxs(\"section\",{className:\"order\",children:[orderState.loadingStatus&&/*#__PURE__*/_jsx(Preloader,{}),orderState.errorText&&/*#__PURE__*/_jsx(MessageDialog,{content:{type:'error',text:orderState.errorText}}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-center\",children:\"\\u041E\\u0444\\u043E\\u0440\\u043C\\u0438\\u0442\\u044C \\u0437\\u0430\\u043A\\u0430\\u0437\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card\",style:{maxWidth:'30rem',margin:'0 auto'},children:/*#__PURE__*/_jsxs(\"form\",{className:\"card-body\",onSubmit:function onSubmit(event){return _onSubmit(event);},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"phone\",children:\"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",className:\"form-control\",id:\"phone\",name:\"phone\",placeholder:\"\\u0412\\u0430\\u0448 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\",value:orderState.phone,onChange:function onChange(event){return onChangePhone(event);},required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"address\",children:\"\\u0410\\u0434\\u0440\\u0435\\u0441 \\u0434\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0438\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",id:\"address\",name:\"address\",placeholder:\"\\u0410\\u0434\\u0440\\u0435\\u0441 \\u0434\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0438\",value:orderState.address,onChange:function onChange(event){return onChangeAddress(event);},required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group form-check\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"form-check-input\",id:\"agreement\",checked:orderState.agreement,onChange:function onChange(event){return onChangeAgreement(event);}}),/*#__PURE__*/_jsx(\"label\",{className:\"form-check-label\",htmlFor:\"agreement\",children:\"\\u0421\\u043E\\u0433\\u043B\\u0430\\u0441\\u0435\\u043D \\u0441 \\u043F\\u0440\\u0430\\u0432\\u0438\\u043B\\u0430\\u043C\\u0438 \\u0434\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0438\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-outline-secondary\",disabled:!orderState.agreement||orderState.loadingStatus||!cartState.cartData.length,children:\"\\u041E\\u0444\\u043E\\u0440\\u043C\\u0438\\u0442\\u044C\"})]})})]});}","map":{"version":3,"sources":["D:/Documents/GitHub/ra16-diploma-master/src/components/Order/Order.jsx"],"names":["React","useSelector","useDispatch","Preloader","MessageDialog","orderRequest","orderPhone","orderAddress","orderAgreement","Order","orderState","state","orderReducer","cartState","cartReducer","dispatch","setOrder","phone","address","cartData","onSubmit","event","preventDefault","onChangePhone","target","id","value","onChangeAddress","onChangeAgreement","status","checked","operationResult","title","text","loadingStatus","errorText","type","maxWidth","margin","agreement","length"],"mappings":"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","sourcesContent":["/* eslint-disable jsx-a11y/label-has-associated-control */\nimport React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Preloader from '../Preloader/Preloader';\nimport MessageDialog from '../MessageDialog/MessageDialog';\nimport {\n  orderRequest,\n  orderPhone,\n  orderAddress,\n  orderAgreement,\n} from '../../actions/orderAction';\n\nexport default function Order() {\n  const orderState = useSelector((state) => state.orderReducer);\n  const cartState = useSelector((state) => state.cartReducer);\n  const dispatch = useDispatch();\n\n  async function setOrder() {\n    dispatch(orderRequest(orderState.phone, orderState.address, cartState.cartData));\n  }\n\n  const onSubmit = (event) => {\n    event.preventDefault();\n    setOrder();\n  };\n\n  const onChangePhone = (event) => {\n    const { id, value } = event.target;\n    dispatch(orderPhone(id, value));\n  };\n\n  const onChangeAddress = (event) => {\n    const { id, value } = event.target;\n    dispatch(orderAddress(id, value));\n  };\n\n  const onChangeAgreement = (event) => {\n    const { id } = event.target;\n    const status = event.target.checked;\n    dispatch(orderAgreement(id, status));\n  };\n\n  return (\n    (orderState.operationResult) ? (\n      <MessageDialog\n        content={{\n          title: 'Ваш заказ принят в обработку',\n          text: 'Наш сотрудник свяжется с Вами для завершения оформления заказа',\n        }}\n      />\n    ) : (\n      <section className=\"order\">\n        {orderState.loadingStatus && <Preloader />}\n        {orderState.errorText && (\n          <MessageDialog\n            content={{ type: 'error', text: orderState.errorText }}\n          />\n        )}\n        <h2 className=\"text-center\">Оформить заказ</h2>\n        <div className=\"card\" style={{ maxWidth: '30rem', margin: '0 auto' }}>\n          <form className=\"card-body\" onSubmit={(event) => onSubmit(event)}>\n            <div className=\"form-group\">\n              <label htmlFor=\"phone\">Телефон</label>\n              <input\n                type=\"tel\"\n                className=\"form-control\"\n                id=\"phone\"\n                name=\"phone\"\n                placeholder=\"Ваш телефон\"\n                value={orderState.phone}\n                onChange={(event) => onChangePhone(event)}\n                required\n              />\n            </div>\n            <div className=\"form-group\">\n              <label htmlFor=\"address\">Адрес доставки</label>\n              <input\n                className=\"form-control\"\n                id=\"address\"\n                name=\"address\"\n                placeholder=\"Адрес доставки\"\n                value={orderState.address}\n                onChange={(event) => onChangeAddress(event)}\n                required\n              />\n            </div>\n            <div className=\"form-group form-check\">\n              <input\n                type=\"checkbox\"\n                className=\"form-check-input\"\n                id=\"agreement\"\n                checked={orderState.agreement}\n                onChange={(event) => onChangeAgreement(event)}\n              />\n              <label\n                className=\"form-check-label\"\n                htmlFor=\"agreement\"\n              >\n                Согласен с правилами доставки\n              </label>\n            </div>\n            <button\n              type=\"submit\"\n              className=\"btn btn-outline-secondary\"\n              disabled={!orderState.agreement\n                || orderState.loadingStatus\n                || !cartState.cartData.length}\n            >\n              Оформить\n            </button>\n          </form>\n        </div>\n      </section>\n    )\n  );\n}\n"]},"metadata":{},"sourceType":"module"}